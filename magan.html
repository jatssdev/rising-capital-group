<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        :root {
            --main-color: #3d4aa1;
            --transition: all 250ms cubic-bezier(.4, 0, .2, 1);
            --header1: 3.052rem;
            --header2: 2.441rem;
            --header3: 1.953rem;
            --header4: 1.563rem;
            --header5: 1.25rem;
            --paragraph: 1rem;
            --primary-font: "Space Grotesk", sans-serif;
            --secondary-font: "Inter", sans-serif;
            --img-height: 300px;
        }

        *,
        *::before,
        *::after {
            margin: 0;
            box-sizing: border-box;
        }

        .custom-accordion {
            font-family: var(--secondary-font);
        }

        .custom-accordion ul {
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            padding-inline-start: 0px;
            list-style: none;
            margin-block-start: 0px;
            margin-block-end: 0px;
        }

        .custom-accordion li {
            cursor: pointer;
        }

        .custom-accordion h2 {
            font-size: var(--header3);
            font-family: var(--primary-font);
            color: var(--main-color);
            padding-bottom: 2rem;
        }

        .custom-container {
            max-width: 1140px;
            padding: 2rem;
            margin: 0 auto;
        }

        .custom-accordion-title {
            padding: 2rem 0px;
            border-bottom: 1px solid var(--main-color);
            position: relative;
            font-size: var(--header5);
            color: var(--main-color);
            font-family: var(--primary-font);
            transition: var(--transition);
            padding: 2rem .5rem;
        }

        .custom-accordion-title::after {
            content: "\276F";
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            right: 0.5rem;
            font-size: 1rem;
            transform-origin: center;
            transform: rotateZ(90deg);
            transition: var(--transition);
            top: 40%;
            bottom: 50%;
            color: var(--main-color);
        }

        .rotate .custom-accordion-title::after {
            transform: rotateZ(-90deg);
        }

        .custom-accordion-content {
            height: 0px;
            opacity: 0;
            display: flex;
            align-items: center;
            gap: 2rem;
            overflow: hidden;
            transition: var(--transition);
        }

        .custom-accordion-content img {
            width: auto;
        }

        .custom-accordion-content p {
            flex: 0 0 50%;
        }

        .custom-accordion-content.text p {
            flex: 0 0 100%;
        }

        .custom-accordion-content.text {
            flex-direction: column;
        }

        .open .custom-accordion-content {
            min-height: var(--img-height);
            height: 100%;
            opacity: 1;
            margin-top: 1rem;
        }

        @media screen and (max-width: 768px) {
            .custom-accordion-content {
                flex-direction: column;
            }

            .custom-accordion-content p {
                flex: 0 0 auto;
            }

            .open .custom-accordion-content {
                min-height: calc(var(--img-height) + var(--img-height) / 2);
            }

            .custom-accordion-item div span {
                display: block;
                width: 90%;
            }
        }
    </style>
</head>

<body>

    <section id="accordion" class="custom-container custom-accordion">

        <ul>
            <li class="custom-accordion-item">
                <div class="custom-accordion-title" id="heading1" tabindex="0" role="button" aria-expanded="false"
                    aria-controls="content1">
                    <span>Item with text & image</span>
                </div>
                <div class="custom-accordion-content" id="content1" role="region" aria-labelledby="heading1">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.</p>
                    <img src="https://picsum.photos/600/400?random=1" alt="Description of image" title="Title of image"
                        width="50%" height="300px" loading="lazy" decoding="async">
                </div>
            </li>
            <li class="custom-accordion-item">
                <div class="custom-accordion-title" id="heading2" tabindex="0" role="button" aria-expanded="false"
                    aria-controls="content2">
                    <span>Item with text</span>
                </div>
                <div class="custom-accordion-content text" id="content2" role="region" aria-labelledby="heading2">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur
                        adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
                        minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                </div>
            </li>
        </ul>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function openAccordion(index) {
            const accordionItems = $(".custom-accordion-item");

            accordionItems.each(function (i) {
                const content = $(this).find(".custom-accordion-content");
                const heading = $(this).find(".custom-accordion-title");

                if (i === index) {
                    const isOpen = $(this).toggleClass("open rotate").hasClass("open");
                    heading.attr("aria-expanded", isOpen);
                    if (isOpen) {
                        content.css("min-height", content.prop("scrollHeight") + "px");
                    } else {
                        content.css("min-height", "0px");
                    }
                } else {
                    $(this).removeClass("open rotate");
                    heading.attr("aria-expanded", "false");
                    content.css("min-height", "0px");
                }
            });
        }

        $(document).ready(function () {
            $(".custom-accordion-title").on("click", function () {
                const index = $(this).parent().index();
                openAccordion(index);
            });

            $(".custom-accordion-title").on("keydown", function (event) {
                if (event.key === 'Enter' || event.key === ' ') {
                    const index = $(this).parent().index();
                    openAccordion(index);
                }
            });
        });
    </script>

</body>

</html>